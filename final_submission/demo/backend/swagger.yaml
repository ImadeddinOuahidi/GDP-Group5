openapi: 3.0.0
info:
  title: Healthcare Management API
  description: |
    A comprehensive healthcare management system API for managing medicines, users, and side effect reporting.
    
    ## Features
    - User management with role-based access (Admin, Doctor, Patient)
    - Medicine inventory management
    - Side effect reporting and monitoring
    - Regulatory compliance features
    
    ## Authentication
    This API uses JWT Bearer tokens for authentication. Include the token in the Authorization header:
    ```
    Authorization: Bearer <your-jwt-token>
    ```
    
    ## User Roles
    - **Admin**: Full system access
    - **Doctor**: Can manage medicines and review reports
    - **Patient**: Can submit reports and view own data
    
  version: 1.0.0
  contact:
    name: Healthcare API Support
    email: support@healthcare-api.com
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT

servers:
  - url: http://localhost:3000/api
    description: Development server
  - url: https://api.healthcare-app.com/api
    description: Production server

tags:
  - name: Authentication
    description: User authentication and authorization
  - name: Medicines
    description: Medicine inventory management
  - name: Reports
    description: Side effect reporting and monitoring
  - name: Users
    description: User profile management

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT token obtained from login endpoint

  schemas:
    Error:
      type: object
      properties:
        success:
          type: boolean
          example: false
        message:
          type: string
          example: "Error message"
        error:
          type: string
          example: "Detailed error information"
        errors:
          type: array
          items:
            type: object
            properties:
              field:
                type: string
              message:
                type: string

    User:
      type: object
      properties:
        _id:
          type: string
          example: "507f1f77bcf86cd799439011"
        firstName:
          type: string
          example: "John"
        lastName:
          type: string
          example: "Doe"
        email:
          type: string
          format: email
          example: "john.doe@example.com"
        phone:
          type: string
          example: "+1234567890"
        dateOfBirth:
          type: string
          format: date
          example: "1990-01-01"
        gender:
          type: string
          enum: [male, female, other]
          example: "male"
        role:
          type: string
          enum: [admin, doctor, patient]
          example: "patient"
        isActive:
          type: boolean
          example: true
        isEmailVerified:
          type: boolean
          example: true
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    UserSignup:
      type: object
      required:
        - firstName
        - lastName
        - email
        - password
        - phone
        - dateOfBirth
        - gender
        - address
      properties:
        firstName:
          type: string
          minLength: 2
          maxLength: 50
          example: "John"
        lastName:
          type: string
          minLength: 2
          maxLength: 50
          example: "Doe"
        email:
          type: string
          format: email
          example: "john.doe@example.com"
        password:
          type: string
          minLength: 6
          example: "SecurePass123"
        phone:
          type: string
          example: "+1234567890"
        dateOfBirth:
          type: string
          format: date
          example: "1990-01-01"
        gender:
          type: string
          enum: [male, female, other]
          example: "male"
        role:
          type: string
          enum: [admin, doctor, patient]
          default: "patient"
        address:
          $ref: '#/components/schemas/Address'

    UserSignin:
      type: object
      required:
        - email
        - password
      properties:
        email:
          type: string
          format: email
          example: "john.doe@example.com"
        password:
          type: string
          example: "SecurePass123"

    Address:
      type: object
      required:
        - street
        - city
        - state
        - zipCode
      properties:
        street:
          type: string
          example: "123 Main St"
        city:
          type: string
          example: "New York"
        state:
          type: string
          example: "NY"
        zipCode:
          type: string
          example: "10001"
        country:
          type: string
          default: "USA"
          example: "USA"

    Medicine:
      type: object
      properties:
        _id:
          type: string
          example: "507f1f77bcf86cd799439011"
        name:
          type: string
          example: "Aspirin"
        genericName:
          type: string
          example: "Acetylsalicylic acid"
        brandName:
          type: string
          example: "Bayer Aspirin"
        category:
          type: string
          enum:
            - "Antibiotic"
            - "Analgesic"
            - "Antiviral"
            - "Antifungal"
            - "Antihistamine"
            - "Cardiovascular"
            - "Diabetes"
            - "Respiratory"
            - "Gastrointestinal"
            - "Neurological"
            - "Psychiatric"
            - "Dermatological"
            - "Hormonal"
            - "Immunosuppressant"
            - "Vaccine"
            - "Vitamin"
            - "Supplement"
            - "Other"
          example: "Analgesic"
        dosageForm:
          type: string
          enum:
            - "Tablet"
            - "Capsule"
            - "Syrup"
            - "Injection"
            - "Cream"
            - "Ointment"
            - "Drops"
            - "Inhaler"
            - "Patch"
            - "Suppository"
            - "Powder"
            - "Gel"
          example: "Tablet"
        strength:
          $ref: '#/components/schemas/Strength'
        prescriptionRequired:
          type: boolean
          example: false
        manufacturer:
          $ref: '#/components/schemas/Manufacturer'
        pricing:
          $ref: '#/components/schemas/Pricing'
        availability:
          $ref: '#/components/schemas/Availability'
        isActive:
          type: boolean
          example: true
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    Strength:
      type: object
      required:
        - value
        - unit
      properties:
        value:
          type: number
          minimum: 0
          example: 500
        unit:
          type: string
          enum: ["mg", "g", "mcg", "ml", "L", "IU", "%"]
          example: "mg"

    Manufacturer:
      type: object
      required:
        - name
        - country
        - licenseNumber
      properties:
        name:
          type: string
          example: "PharmaCorp Inc."
        country:
          type: string
          example: "USA"
        licenseNumber:
          type: string
          example: "LIC123456789"

    Pricing:
      type: object
      properties:
        wholesalePrice:
          type: number
          minimum: 0
          example: 5.99
        retailPrice:
          type: number
          minimum: 0
          example: 9.99
        currency:
          type: string
          default: "USD"
          example: "USD"

    Availability:
      type: object
      properties:
        inStock:
          type: boolean
          default: true
        quantity:
          type: integer
          minimum: 0
          default: 0
          example: 100
        minimumStock:
          type: integer
          minimum: 0
          default: 10
          example: 10

    ReportSideEffect:
      type: object
      properties:
        _id:
          type: string
          example: "507f1f77bcf86cd799439011"
        reportedBy:
          $ref: '#/components/schemas/User'
        medicine:
          $ref: '#/components/schemas/Medicine'
        patient:
          $ref: '#/components/schemas/User'
        sideEffects:
          type: array
          items:
            $ref: '#/components/schemas/SideEffect'
        medicationUsage:
          $ref: '#/components/schemas/MedicationUsage'
        reportDetails:
          $ref: '#/components/schemas/ReportDetails'
        status:
          type: string
          enum: ["Draft", "Submitted", "Under Review", "Reviewed", "Closed", "Rejected"]
          example: "Submitted"
        priority:
          type: string
          enum: ["Low", "Medium", "High", "Critical"]
          example: "Medium"
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    SideEffect:
      type: object
      required:
        - effect
        - severity
        - onset
      properties:
        effect:
          type: string
          example: "Nausea"
        severity:
          type: string
          enum: ["Mild", "Moderate", "Severe", "Life-threatening"]
          example: "Mild"
        onset:
          type: string
          enum: ["Immediate", "Within hours", "Within days", "Within weeks", "Unknown"]
          example: "Within hours"
        bodySystem:
          type: string
          enum:
            - "Gastrointestinal"
            - "Cardiovascular"
            - "Respiratory"
            - "Nervous System"
            - "Musculoskeletal"
            - "Dermatological"
            - "Genitourinary"
            - "Endocrine"
            - "Hematological"
            - "Psychiatric"
            - "Ocular"
            - "Otic"
            - "Other"
          example: "Gastrointestinal"
        description:
          type: string
          maxLength: 500
          example: "Patient experienced mild nausea after taking medication"

    MedicationUsage:
      type: object
      required:
        - indication
        - dosage
        - startDate
      properties:
        indication:
          type: string
          example: "Pain relief"
        dosage:
          $ref: '#/components/schemas/Dosage'
        startDate:
          type: string
          format: date
          example: "2025-09-20"
        endDate:
          type: string
          format: date
          example: "2025-09-25"

    Dosage:
      type: object
      required:
        - amount
        - frequency
        - route
      properties:
        amount:
          type: string
          example: "500mg"
        frequency:
          type: string
          example: "Twice daily"
        route:
          type: string
          enum:
            - "Oral"
            - "Intravenous"
            - "Intramuscular"
            - "Subcutaneous"
            - "Topical"
            - "Inhalation"
            - "Rectal"
            - "Vaginal"
            - "Nasal"
            - "Ophthalmic"
            - "Otic"
          example: "Oral"

    ReportDetails:
      type: object
      required:
        - incidentDate
        - seriousness
        - outcome
      properties:
        incidentDate:
          type: string
          format: date
          example: "2025-09-21"
        reportDate:
          type: string
          format: date-time
        seriousness:
          type: string
          enum: ["Serious", "Non-serious"]
          example: "Non-serious"
        outcome:
          type: string
          enum:
            - "Recovered/Resolved"
            - "Recovering"
            - "Not recovered"
            - "Recovered with sequelae"
            - "Fatal"
            - "Unknown"
          example: "Recovered/Resolved"

    AuthResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: "Login successful"
        data:
          type: object
          properties:
            user:
              $ref: '#/components/schemas/User'
            token:
              type: string
              example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."

    Pagination:
      type: object
      properties:
        currentPage:
          type: integer
          example: 1
        totalPages:
          type: integer
          example: 5
        totalMedicines:
          type: integer
          example: 50
        hasNextPage:
          type: boolean
          example: true
        hasPrevPage:
          type: boolean
          example: false

  responses:
    ValidationError:
      description: Validation Error
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                example: false
              message:
                type: string
                example: "Validation errors"
              errors:
                type: array
                items:
                  type: object
                  properties:
                    field:
                      type: string
                      example: "email"
                    message:
                      type: string
                      example: "Valid email is required"
                    value:
                      type: string
                      example: "invalid-email"
    
    UnauthorizedError:
      description: Unauthorized - Authentication required
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                example: false
              message:
                type: string
                example: "Access denied. No token provided."
    
    ForbiddenError:
      description: Forbidden - Insufficient permissions
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                example: false
              message:
                type: string
                example: "You do not have permission to perform this action."
    
    NotFoundError:
      description: Resource not found
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                example: false
              message:
                type: string
                example: "Resource not found"
    
    ConflictError:
      description: Conflict - Resource already exists
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                example: false
              message:
                type: string
                example: "Resource already exists"
    
    InternalServerError:
      description: Internal Server Error
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                example: false
              message:
                type: string
                example: "Internal server error"
              error:
                type: string
                example: "Detailed error message"

security:
  - bearerAuth: []

paths:
  # ========================================
  # Authentication Endpoints
  # ========================================
  
  /auth/signup:
    post:
      tags:
        - Authentication
      summary: Register a new user
      description: Create a new user account with role-based registration (patient, doctor, or admin)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserSignup'
            examples:
              patient:
                summary: Patient Registration
                value:
                  firstName: "John"
                  lastName: "Doe"
                  email: "john.doe@example.com"
                  password: "SecurePass123"
                  phone: "+1234567890"
                  dateOfBirth: "1990-01-01"
                  gender: "male"
                  role: "patient"
                  address:
                    street: "123 Main St"
                    city: "New York"
                    state: "NY"
                    zipCode: "10001"
                    country: "USA"
                  patientInfo:
                    emergencyContact:
                      name: "Jane Doe"
                      relationship: "spouse"
                      phone: "+1234567891"
                    bloodGroup: "O+"
              doctor:
                summary: Doctor Registration
                value:
                  firstName: "Dr. Sarah"
                  lastName: "Smith"
                  email: "dr.smith@hospital.com"
                  password: "SecurePass123"
                  phone: "+1234567892"
                  dateOfBirth: "1985-05-15"
                  gender: "female"
                  role: "doctor"
                  address:
                    street: "456 Medical Ave"
                    city: "Boston"
                    state: "MA"
                    zipCode: "02101"
                  doctorInfo:
                    licenseNumber: "MD123456"
                    specialization: "Cardiology"
                    yearsOfExperience: 10
                    consultationFee: 200
      responses:
        '201':
          description: User registered successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'
        '400':
          $ref: '#/components/responses/ValidationError'
        '409':
          $ref: '#/components/responses/ConflictError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /auth/signin:
    post:
      tags:
        - Authentication
      summary: Sign in user
      description: Authenticate user and return JWT token
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserSignin'
            example:
              email: "john.doe@example.com"
              password: "SecurePass123"
      responses:
        '200':
          description: Login successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /auth/verify-email:
    get:
      tags:
        - Authentication
      summary: Verify email address
      description: Verify user's email address using verification token
      parameters:
        - in: query
          name: token
          required: true
          schema:
            type: string
          description: Email verification token
          example: "abc123def456ghi789"
      responses:
        '200':
          description: Email verified successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Email verified successfully"
        '400':
          $ref: '#/components/responses/ValidationError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /auth/resend-verification:
    post:
      tags:
        - Authentication
      summary: Resend verification email
      description: Send a new email verification token to the user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
              properties:
                email:
                  type: string
                  format: email
                  example: "john.doe@example.com"
      responses:
        '200':
          description: Verification email sent successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Verification email sent"
        '400':
          $ref: '#/components/responses/ValidationError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /auth/profile:
    get:
      tags:
        - Authentication
      summary: Get current user profile
      description: Get the authenticated user's profile information
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Profile retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      user:
                        $ref: '#/components/schemas/User'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    
    put:
      tags:
        - Authentication
      summary: Update user profile
      description: Update the authenticated user's profile information
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                firstName:
                  type: string
                  minLength: 2
                  maxLength: 50
                lastName:
                  type: string
                  minLength: 2
                  maxLength: 50
                phone:
                  type: string
                address:
                  $ref: '#/components/schemas/Address'
            example:
              firstName: "John"
              lastName: "Smith"
              phone: "+1234567890"
              address:
                street: "456 New St"
                city: "Boston"
                state: "MA"
                zipCode: "02101"
      responses:
        '200':
          description: Profile updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Profile updated successfully"
                  data:
                    type: object
                    properties:
                      user:
                        $ref: '#/components/schemas/User'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /auth/change-password:
    put:
      tags:
        - Authentication
      summary: Change user password
      description: Change the authenticated user's password
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - currentPassword
                - newPassword
              properties:
                currentPassword:
                  type: string
                  example: "OldPass123"
                newPassword:
                  type: string
                  minLength: 6
                  example: "NewSecurePass456"
      responses:
        '200':
          description: Password changed successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Password changed successfully"
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /auth/profile-picture:
    put:
      tags:
        - Authentication
      summary: Update profile picture
      description: Update the authenticated user's profile picture
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - profilePicture
              properties:
                profilePicture:
                  type: string
                  format: uri
                  example: "https://example.com/images/profile.jpg"
      responses:
        '200':
          description: Profile picture updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Profile picture updated successfully"
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /auth/deactivate:
    delete:
      tags:
        - Authentication
      summary: Deactivate user account
      description: Deactivate the authenticated user's account
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - password
              properties:
                password:
                  type: string
                  example: "SecurePass123"
      responses:
        '200':
          description: Account deactivated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Account deactivated successfully"
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  # ========================================
  # Medicine Endpoints
  # ========================================
  
  /medicines:
    get:
      tags:
        - Medicines
      summary: Get all medicines
      description: Retrieve a paginated list of all medicines with optional filtering
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            minimum: 1
            default: 1
          description: Page number
        - in: query
          name: limit
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 10
          description: Number of items per page
        - in: query
          name: search
          schema:
            type: string
          description: Search by medicine name
        - in: query
          name: category
          schema:
            type: string
          description: Filter by category
        - in: query
          name: inStock
          schema:
            type: boolean
          description: Filter by stock availability
      responses:
        '200':
          description: Medicines retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      medicines:
                        type: array
                        items:
                          $ref: '#/components/schemas/Medicine'
                      pagination:
                        $ref: '#/components/schemas/Pagination'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    
    post:
      tags:
        - Medicines
      summary: Add new medicine
      description: Add a new medicine to the inventory (Doctor/Admin only)
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MedicineInput'
            example:
              name: "Aspirin"
              genericName: "Acetylsalicylic Acid"
              category: "Pain Relief"
              manufacturer: "PharmaCo"
              description: "Pain reliever and fever reducer"
              dosageForm: "Tablet"
              strength: "500mg"
              quantityInStock: 100
              reorderLevel: 20
              price: 5.99
              expiryDate: "2025-12-31"
              sideEffects:
                - "Stomach upset"
                - "Heartburn"
              contraindications:
                - "Bleeding disorders"
                - "Pregnancy"
              requiresPrescription: false
      responses:
        '201':
          description: Medicine created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Medicine created successfully"
                  data:
                    type: object
                    properties:
                      medicine:
                        $ref: '#/components/schemas/Medicine'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /medicines/{id}:
    get:
      tags:
        - Medicines
      summary: Get medicine by ID
      description: Retrieve detailed information about a specific medicine
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: Medicine ID
          example: "60d5ec49f1b2c8b1f8e4e1a1"
      responses:
        '200':
          description: Medicine retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      medicine:
                        $ref: '#/components/schemas/Medicine'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    
    put:
      tags:
        - Medicines
      summary: Update medicine
      description: Update medicine information (Doctor/Admin only)
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: Medicine ID
          example: "60d5ec49f1b2c8b1f8e4e1a1"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MedicineInput'
      responses:
        '200':
          description: Medicine updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Medicine updated successfully"
                  data:
                    type: object
                    properties:
                      medicine:
                        $ref: '#/components/schemas/Medicine'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    
    delete:
      tags:
        - Medicines
      summary: Delete medicine
      description: Delete a medicine from inventory (Admin only)
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: Medicine ID
          example: "60d5ec49f1b2c8b1f8e4e1a1"
      responses:
        '200':
          description: Medicine deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Medicine deleted successfully"
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /medicines/search/fuzzy:
    get:
      tags:
        - Medicines
      summary: Fuzzy search medicines
      description: Search medicines using fuzzy matching algorithm
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: query
          required: true
          schema:
            type: string
            minLength: 2
          description: Search query
          example: "asprin"
        - in: query
          name: threshold
          schema:
            type: number
            minimum: 0
            maximum: 1
            default: 0.6
          description: Fuzzy matching threshold (0-1)
      responses:
        '200':
          description: Search results
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      medicines:
                        type: array
                        items:
                          allOf:
                            - $ref: '#/components/schemas/Medicine'
                            - type: object
                              properties:
                                score:
                                  type: number
                                  description: Fuzzy match score
                                  example: 0.85
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /medicines/suggestions:
    get:
      tags:
        - Medicines
      summary: Get medicine suggestions
      description: Get autocomplete suggestions for medicine search
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: query
          required: true
          schema:
            type: string
            minLength: 1
          description: Partial medicine name
          example: "asp"
        - in: query
          name: limit
          schema:
            type: integer
            minimum: 1
            maximum: 20
            default: 5
          description: Maximum number of suggestions
      responses:
        '200':
          description: Suggestions retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      suggestions:
                        type: array
                        items:
                          type: string
                        example: ["Aspirin", "Aspirin Plus", "Baby Aspirin"]
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /medicines/categories:
    get:
      tags:
        - Medicines
      summary: Get all medicine categories
      description: Retrieve list of all unique medicine categories
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Categories retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      categories:
                        type: array
                        items:
                          type: string
                        example: ["Pain Relief", "Antibiotics", "Antacids", "Vitamins"]
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /medicines/{id}/stock:
    put:
      tags:
        - Medicines
      summary: Update medicine stock
      description: Update stock quantity for a medicine (Doctor/Admin only)
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: Medicine ID
          example: "60d5ec49f1b2c8b1f8e4e1a1"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - quantityInStock
              properties:
                quantityInStock:
                  type: integer
                  minimum: 0
                  example: 50
      responses:
        '200':
          description: Stock updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Stock updated successfully"
                  data:
                    type: object
                    properties:
                      medicine:
                        $ref: '#/components/schemas/Medicine'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /medicines/low-stock:
    get:
      tags:
        - Medicines
      summary: Get low stock medicines
      description: Retrieve medicines that are below reorder level
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Low stock medicines retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      medicines:
                        type: array
                        items:
                          $ref: '#/components/schemas/Medicine'
                      count:
                        type: integer
                        example: 5
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  # ========================================
  # Side Effect Reports Endpoints
  # ========================================
  
  /reports:
    get:
      tags:
        - Side Effect Reports
      summary: Get all side effect reports with filtering
      description: Retrieve a paginated list of side effect reports with comprehensive filtering options
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            minimum: 1
            default: 1
        - in: query
          name: limit
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 10
        - in: query
          name: status
          schema:
            type: string
            enum: [Draft, Submitted, Under Review, Reviewed, Closed, Rejected]
        - in: query
          name: priority
          schema:
            type: string
            enum: [Low, Medium, High, Critical]
        - in: query
          name: seriousness
          schema:
            type: string
            enum: [Serious, Non-serious]
      responses:
        '200':
          description: Successfully retrieved reports
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: success
                  results:
                    type: integer
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/ReportSideEffect'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    
    post:
      tags:
        - Side Effect Reports
      summary: Submit new side effect report
      description: Create a new adverse event report
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - medicine
                - sideEffects
              properties:
                medicine:
                  type: string
                patient:
                  type: string
                sideEffects:
                  type: array
                  items:
                    type: object
      responses:
        '201':
          description: Report submitted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                  data:
                    $ref: '#/components/schemas/ReportSideEffect'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /reports/dashboard:
    get:
      tags:
        - Side Effect Reports
      summary: Get dashboard statistics (Admin/Doctor only)
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Dashboard statistics retrieved
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /reports/serious:
    get:
      tags:
        - Side Effect Reports
      summary: Get serious side effect reports
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Serious reports retrieved
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /reports/medicine/{medicineId}:
    get:
      tags:
        - Side Effect Reports
      summary: Get reports by medicine
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: medicineId
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Reports for medicine retrieved
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /reports/{id}:
    get:
      tags:
        - Side Effect Reports
      summary: Get report by ID
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Report retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                  data:
                    $ref: '#/components/schemas/ReportSideEffect'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /reports/{id}/status:
    put:
      tags:
        - Side Effect Reports
      summary: Update report status (Doctor/Admin only)
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - status
              properties:
                status:
                  type: string
                  enum: [Draft, Submitted, Under Review, Reviewed, Closed, Rejected]
      responses:
        '200':
          description: Status updated
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /reports/{id}/followup:
    post:
      tags:
        - Side Effect Reports
      summary: Add follow-up information
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - informationType
                - description
              properties:
                informationType:
                  type: string
                  enum: [Additional information, Correction, Follow-up report]
                description:
                  type: string
      responses:
        '200':
          description: Follow-up added
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /reports/{id}/causality:
    put:
      tags:
        - Side Effect Reports
      summary: Update causality assessment (Doctor/Admin only)
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - algorithm
                - category
              properties:
                algorithm:
                  type: string
                  enum: [WHO-UMC, Naranjo, CIOMS/RUCAM, Other, Not assessed]
                category:
                  type: string
                  enum: [Certain, Probable, Possible, Unlikely, Conditional, Unassessable, Unclassifiable]
      responses:
        '200':
          description: Causality updated
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /reports/aisubmit:
    post:
      tags:
        - Side Effect Reports
      summary: Submit report using AI assistance
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: AI-assisted report submitted
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /reports/aipreview:
    post:
      tags:
        - Side Effect Reports
      summary: Preview AI-generated report
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: AI preview generated
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /reports/aiconfirm:
    post:
      tags:
        - Side Effect Reports
      summary: Confirm and submit AI-generated report
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: AI report confirmed
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /reports/{id}/analyze-severity:
    post:
      tags:
        - Side Effect Reports
      summary: Analyze severity using AI
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Severity analyzed
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /reports/{id}/severity-status:
    get:
      tags:
        - Side Effect Reports
      summary: Get severity analysis status
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Severity status retrieved
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /reports/batch-analyze:
    post:
      tags:
        - Side Effect Reports
      summary: Batch analyze severity
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Batch analysis completed
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /reports/analysis-stats:
    get:
      tags:
        - Side Effect Reports
      summary: Get analysis statistics
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Statistics retrieved
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  # ========================================
  # Symptom Progression Endpoints
  # ========================================
  
  /symptom-progression/create:
    post:
      tags:
        - Symptom Progression
      summary: Create symptom progression tracking from existing report
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - reportId
                - sideEffectId
              properties:
                reportId:
                  type: string
                sideEffectId:
                  type: string
                patientId:
                  type: string
                initialImpact:
                  type: object
      responses:
        '201':
          description: Symptom progression tracking created
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /symptom-progression/{progressionId}/entries:
    post:
      tags:
        - Symptom Progression
      summary: Add new progression entry
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: progressionId
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - severity
                - frequency
                - pattern
                - dataSource
              properties:
                severity:
                  type: object
                frequency:
                  type: string
                  enum: [Constant, Frequent, Occasional, Rare, Intermittent, Once]
                pattern:
                  type: string
                  enum: [Improving, Worsening, Stable, Fluctuating, Resolved]
                dataSource:
                  type: string
                  enum: [Patient, Healthcare provider, Caregiver, Medical records, Device]
      responses:
        '200':
          description: Progression entry added
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /symptom-progression/{progressionId}:
    get:
      tags:
        - Symptom Progression
      summary: Get symptom progression by ID
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: progressionId
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Symptom progression retrieved
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    
    delete:
      tags:
        - Symptom Progression
      summary: Delete symptom progression
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: progressionId
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Symptom progression deleted
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /symptom-progression/patient/{patientId}:
    get:
      tags:
        - Symptom Progression
      summary: Get symptom progressions for a patient
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: patientId
          required: false
          schema:
            type: string
        - in: query
          name: status
          schema:
            type: string
            enum: [Active, Resolved, Chronic, Intermittent, Under investigation, Closed]
        - in: query
          name: bodySystem
          schema:
            type: string
      responses:
        '200':
          description: Patient progressions retrieved
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /symptom-progression/attention/needed:
    get:
      tags:
        - Symptom Progression
      summary: Get progressions needing attention (Healthcare providers only)
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: severity
          schema:
            type: string
        - in: query
          name: bodySystem
          schema:
            type: string
        - in: query
          name: minDuration
          schema:
            type: integer
      responses:
        '200':
          description: Progressions needing attention retrieved
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /symptom-progression/{progressionId}/status:
    put:
      tags:
        - Symptom Progression
      summary: Update symptom progression status
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: progressionId
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - status
              properties:
                status:
                  type: string
                  enum: [Active, Resolved, Chronic, Intermittent, Under investigation, Closed]
      responses:
        '200':
          description: Progression status updated
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /symptom-progression/{progressionId}/alerts/acknowledge:
    post:
      tags:
        - Symptom Progression
      summary: Acknowledge alerts for a symptom progression
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: progressionId
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - alertIds
              properties:
                alertIds:
                  type: array
                  items:
                    type: string
      responses:
        '200':
          description: Alerts acknowledged
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /symptom-progression/search:
    get:
      tags:
        - Symptom Progression
      summary: Search symptom progressions with advanced filters
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: q
          schema:
            type: string
        - in: query
          name: patientId
          schema:
            type: string
        - in: query
          name: medicineId
          schema:
            type: string
        - in: query
          name: page
          schema:
            type: integer
            default: 1
        - in: query
          name: limit
          schema:
            type: integer
            default: 20
      responses:
        '200':
          description: Search results retrieved
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /symptom-progression/analytics:
    get:
      tags:
        - Symptom Progression
      summary: Get progression analytics (Healthcare providers only)
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: medicineId
          schema:
            type: string
        - in: query
          name: bodySystem
          schema:
            type: string
        - in: query
          name: startDate
          schema:
            type: string
            format: date
        - in: query
          name: endDate
          schema:
            type: string
            format: date
      responses:
        '200':
          description: Analytics data retrieved
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /symptom-progression/reports/generate:
    post:
      tags:
        - Symptom Progression
      summary: Generate progression report (Healthcare providers only)
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - type
                - entityId
              properties:
                type:
                  type: string
                  enum: [patient, medicine]
                entityId:
                  type: string
                startDate:
                  type: string
                  format: date
                endDate:
                  type: string
                  format: date
                includeAnalytics:
                  type: boolean
      responses:
        '200':
          description: Progression report generated
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /symptom-progression/dashboard-analytics:
    get:
      tags:
        - Symptom Progression
      summary: Get comprehensive dashboard analytics (Healthcare providers only)
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: medicineId
          schema:
            type: string
        - in: query
          name: bodySystem
          schema:
            type: string
      responses:
        '200':
          description: Dashboard analytics retrieved
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /symptom-progression/patient-analytics/{patientId}:
    get:
      tags:
        - Symptom Progression
      summary: Get patient-specific analytics
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: patientId
          required: false
          schema:
            type: string
      responses:
        '200':
          description: Patient analytics retrieved
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /symptom-progression/summary:
    get:
      tags:
        - Symptom Progression
      summary: Get progression summary for dashboard
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: patientId
          schema:
            type: string
        - in: query
          name: medicineId
          schema:
            type: string
      responses:
        '200':
          description: Summary data retrieved
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  # ========================================
  # File Upload Endpoints
  # ========================================
  
  /uploads/single:
    post:
      tags:
        - Uploads
      summary: Upload single file to S3
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
      responses:
        '200':
          description: File uploaded successfully
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /uploads/multiple:
    post:
      tags:
        - Uploads
      summary: Upload multiple files to S3
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                files:
                  type: array
                  items:
                    type: string
                    format: binary
      responses:
        '200':
          description: Files uploaded successfully
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /uploads/images:
    post:
      tags:
        - Uploads
      summary: Upload image files only
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                images:
                  type: array
                  items:
                    type: string
                    format: binary
      responses:
        '200':
          description: Images uploaded successfully
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /uploads/videos:
    post:
      tags:
        - Uploads
      summary: Upload video files only
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                videos:
                  type: array
                  items:
                    type: string
                    format: binary
      responses:
        '200':
          description: Videos uploaded successfully
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /uploads/documents:
    post:
      tags:
        - Uploads
      summary: Upload document files only
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                documents:
                  type: array
                  items:
                    type: string
                    format: binary
      responses:
        '200':
          description: Documents uploaded successfully
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /uploads/{key}:
    delete:
      tags:
        - Uploads
      summary: Delete file from S3
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: key
          required: true
          schema:
            type: string
          description: S3 object key
      responses:
        '200':
          description: File deleted successfully
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /uploads/{key}/info:
    get:
      tags:
        - Uploads
      summary: Get file information
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: key
          required: true
          schema:
            type: string
      responses:
        '200':
          description: File info retrieved
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /uploads/{key}/presigned-url:
    get:
      tags:
        - Uploads
      summary: Get presigned URL for file access
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: key
          required: true
          schema:
            type: string
        - in: query
          name: expiresIn
          schema:
            type: integer
            default: 3600
      responses:
        '200':
          description: Presigned URL generated
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /uploads/{key}/copy:
    post:
      tags:
        - Uploads
      summary: Copy file within S3
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: key
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - destinationKey
              properties:
                destinationKey:
                  type: string
      responses:
        '200':
          description: File copied successfully
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /uploads/list/{folder}:
    get:
      tags:
        - Uploads
      summary: List files in folder
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: folder
          required: false
          schema:
            type: string
      responses:
        '200':
          description: Files listed successfully
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /uploads/stats:
    get:
      tags:
        - Uploads
      summary: Get upload statistics
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Upload statistics retrieved
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  
  /uploads/health:
    get:
      tags:
        - Uploads
      summary: Health check for upload service
      responses:
        '200':
          description: Upload service is healthy
        '500':
          $ref: '#/components/responses/InternalServerError'
